<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Servicios NOC | RomanoTI Solutions</title>

  <!-- Tailwind CSS -->
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet">

  <!-- FAVICONS unificados -->
  <link rel="apple-touch-icon" sizes="180x180" href="/img/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/img/favicon-32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/img/favicon-16.png">
  <link rel="shortcut icon" href="/favicon.ico">
  <link rel="mask-icon" href="/img/safari-pinned-tab.svg" color="#2563eb">
  <meta name="theme-color" content="#2563eb">

  <style>
    body{font-family:'Montserrat',sans-serif;background:#f8f9fa;color:#333;scroll-behavior:smooth}
    .hero-bg{background:linear-gradient(135deg,#1e3a8a 0%,#2563eb 100%)}
    .btn-primary{background:#2563EB;transition:all .3s}
    .btn-primary:hover{background:#1D4ED8;transform:translateY(-2px);box-shadow:0 4px 12px rgba(0,0,0,.15)}
    .feature-card{transition:all .3s;border-radius:.5rem;box-shadow:0 1px 3px rgba(0,0,0,.1)}
    .feature-card:hover{transform:translateY(-6px);box-shadow:0 12px 30px -8px rgba(37,99,235,.15)}
  </style>
</head>
<body class="bg-gray-50">

  <!-- Punto de montaje del header centralizado -->
  <div id="app-header"></div>

  <!-- ===== Hero NOC ===== -->
  <section class="hero-bg text-white py-28">
    <div class="container mx-auto px-6 text-center">
      <h1 class="text-4xl md:text-5xl font-bold mb-6">Servicios NOC</h1>
      <p class="text-xl md:text-2xl mb-8 max-w-3xl mx-auto">
        Monitoreo, alertas y respuesta 24/7 para tu red y sistemas
      </p>
    </div>
  </section>

  <!-- ===== Sección de marketing ===== -->
  <section class="py-16 bg-white">
    <div class="container mx-auto px-6">
      <div class="text-center mb-12">
        <h2 class="text-3xl font-bold">Qué Entregamos</h2>
        <p class="text-xl text-gray-600 max-w-2xl mx-auto">
          Monitoreo integral de redes y sistemas para mantener tu entorno de TI funcionando sin problemas.
        </p>
      </div>

      <!-- Monitoreo 24/7 -->
      <div class="feature-card p-8 rounded-lg shadow-sm bg-white mb-8">
        <h3 class="text-xl font-bold mb-4">Monitoreo de Red y Servidores 24/7</h3>
        <p class="mb-6">Supervisión continua de dispositivos de red, servidores y servicios críticos para detectar problemas antes de que impacten tu negocio.</p>
        <div class="grid md:grid-cols-3 gap-6">
          <div class="bg-blue-50 p-6 rounded-lg">
            <h4 class="font-bold text-lg mb-3">Software</h4>
            <p>Zabbix, PRTG, Nagios. Monitoreo basado en SNMP/WMI con paneles en tiempo real.</p>
          </div>
          <div class="bg-blue-50 p-6 rounded-lg">
            <h4 class="font-bold text-lg mb-3">Hardware</h4>
            <p>Firewalls, switches, servidores con SNMP/WMI habilitado. Gateway de monitoreo opcional.</p>
          </div>
          <div class="bg-blue-50 p-6 rounded-lg">
            <h4 class="font-bold text-lg mb-3">Intervención Humana</h4>
            <p>Ingenieros certificados (MCP, CCNA) validan alertas e inician la respuesta.</p>
          </div>
        </div>
      </div>

      <!-- Alertas en tiempo real -->
      <div class="feature-card p-8 rounded-lg shadow-sm bg-white mb-8">
        <h3 class="text-xl font-bold mb-4">Alertas en Tiempo Real y Escalamiento de Incidentes</h3>
        <p class="mb-6">Notificaciones inmediatas y procedimientos de escalamiento para garantizar respuesta rápida ante eventos críticos.</p>
        <div class="grid md:grid-cols-3 gap-6">
          <div class="bg-blue-50 p-6 rounded-lg">
            <h4 class="font-bold text-lg mb-3">Software</h4>
            <p>Correo, SMS (Twilio), integraciones con Teams/Slack. Umbrales inteligentes para reducir ruido.</p>
          </div>
          <div class="bg-blue-50 p-6 rounded-lg">
            <h4 class="font-bold text-lg mb-3">Hardware</h4>
            <p>Dispositivos móviles para ingenieros on-call. Canales de comunicación redundantes.</p>
          </div>
          <div class="bg-blue-50 p-6 rounded-lg">
            <h4 class="font-bold text-lg mb-3">Intervención Humana</h4>
            <p>Ruta de escalamiento L1/L2/L3. Primera respuesta en menos de 15 minutos para alertas críticas.</p>
          </div>
        </div>
      </div>

      <!-- Reportes de desempeño -->
      <div class="feature-card p-8 rounded-lg shadow-sm bg-white mb-8">
        <h3 class="text-xl font-bold mb-4">Reportes de Desempeño y Planeación de Capacidad</h3>
        <p class="mb-6">Informes mensuales y análisis de tendencias para planear el crecimiento futuro y evitar cuellos de botella.</p>
        <div class="grid md:grid-cols-3 gap-6">
          <div class="bg-blue-50 p-6 rounded-lg">
            <h4 class="font-bold text-lg mb-3">Software</h4>
            <p>Power BI, reportes de Zabbix, históricos de PRTG. Paneles personalizados y proyecciones.</p>
          </div>
          <div class="bg-blue-50 p-6 rounded-lg">
            <h4 class="font-bold text-lg mb-3">Hardware</h4>
            <p>Almacenamiento para logs y métricas (local o nube). Retención: 12+ meses.</p>
          </div>
          <div class="bg-blue-50 p-6 rounded-lg">
            <h4 class="font-bold text-lg mb-3">Intervención Humana</h4>
            <p>Ingenieros analizan tendencias y recomiendan mejoras antes de llegar a los límites.</p>
          </div>
        </div>
      </div>

      <!-- Gestión de logs -->
      <div class="feature-card p-8 rounded-lg shadow-sm bg-white mb-8">
        <h3 class="text-xl font-bold mb-4">Gestión y Análisis de Logs</h3>
        <p class="mb-6">Recolección y análisis centralizados de registros para troubleshooting, cumplimiento y auditoría de seguridad.</p>
        <div class="grid md:grid-cols-3 gap-6">
          <div class="bg-blue-50 p-6 rounded-lg">
            <h4 class="font-bold text-lg mb-3">Software</h4>
            <p>ELK Stack, Graylog, Wazuh. Agregación de logs por Syslog y agentes.</p>
          </div>
          <div class="bg-blue-50 p-6 rounded-lg">
            <h4 class="font-bold text-lg mb-3">Hardware</h4>
            <p>Servidor SIEM liviano (2 vCPU, 8 GB RAM, 100 GB SSD) o basado en la nube.</p>
          </div>
          <div class="bg-blue-50 p-6 rounded-lg">
            <h4 class="font-bold text-lg mb-3">Intervención Humana</h4>
            <p>Analistas revisan logs por anomalías, cumplimiento y amenazas de seguridad.</p>
          </div>
        </div>
      </div>

      <!-- Respuesta a incidentes -->
      <div class="feature-card p-8 rounded-lg shadow-sm bg-white">
        <h3 class="text-xl font-bold mb-4">Respuesta a Incidentes y Seguimiento de Resoluciones</h3>
        <p class="mb-6">Seguimiento de ciclo completo desde la detección hasta la resolución, con documentación e informes detallados.</p>
        <div class="grid md:grid-cols-3 gap-6">
          <div class="bg-blue-50 p-6 rounded-lg">
            <h4 class="font-bold text-lg mb-3">Software</h4>
            <p>Zammad, Jira Service Desk. Ticketing con seguimiento de SLA y trazabilidad.</p>
          </div>
          <div class="bg-blue-50 p-6 rounded-lg">
            <h4 class="font-bold text-lg mb-3">Hardware</h4>
            <p>Base de datos segura con copias de seguridad diarias. Nube o local.</p>
          </div>
          <div class="bg-blue-50 p-6 rounded-lg">
            <h4 class="font-bold text-lg mb-3">Intervención Humana</h4>
            <p>Proceso basado en ITIL: Detección → Escalamiento → Resolución → Retroalimentación.</p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- ===== Caja de Herramientas NOC en Vivo ===== -->
  <section class="py-12 bg-white">
    <div class="container mx-auto px-6 max-w-4xl">
      <h2 class="text-2xl font-bold mb-2">Caja de Herramientas NOC en Vivo</h2>
      <p class="text-gray-600 mb-6">Ejecuta verificaciones en tiempo real a través del backend de RomanoTI.</p>

      <!-- Clave API de la organización -->
      <div class="mb-6">
        <label class="block text-sm font-medium text-gray-700 mb-1">Clave API de la organización</label>
        <input id="nocKey" type="password" placeholder="Pega tu clave API"
               class="w-full rounded-lg border-gray-300 focus:ring-blue-500 focus:border-blue-500"/>
        <p class="text-xs text-gray-500 mt-1">Solo se envía como cabecera <code>x-api-key</code>; nunca se almacena del lado del servidor.</p>
      </div>

      <div class="grid md:grid-cols-2 gap-6">
        <!-- Verificación HTTP -->
        <div class="p-5 border rounded-xl shadow-sm">
          <h3 class="font-semibold mb-3">Verificación HTTP</h3>
          <div class="space-y-3">
            <input id="httpUrl" type="url" placeholder="https://example.com"
                   class="w-full rounded-lg border-gray-300 focus:ring-blue-500 focus:border-blue-500"/>
            <div class="flex gap-3">
              <label class="inline-flex items-center gap-2">
                <input id="httpTls" type="checkbox" class="rounded border-gray-300" checked/>
                <span class="text-sm text-gray-700">Verificar TLS</span>
              </label>
              <div class="flex items-center gap-2">
                <span class="text-sm text-gray-700">Tiempo de espera</span>
                <input id="httpTimeout" type="number" value="8" min="1" max="30"
                       class="w-20 rounded-lg border-gray-300 focus:ring-blue-500 focus:border-blue-500"/>
                <span class="text-sm text-gray-700">s</span>
              </div>
            </div>
            <button id="btnHttp" class="btn-primary text-white px-4 py-2 rounded-lg">Ejecutar</button>
            <pre id="outHttp" class="bg-gray-900 text-gray-100 p-3 rounded-lg text-sm overflow-auto max-h-60"></pre>
          </div>
        </div>

        <!-- Consulta DNS -->
        <div class="p-5 border rounded-xl shadow-sm">
          <h3 class="font-semibold mb-3">Consulta DNS</h3>
          <div class="space-y-3">
            <input id="dnsDomain" type="text" placeholder="example.com"
                   class="w-full rounded-lg border-gray-300 focus:ring-blue-500 focus:border-blue-500"/>
            <select id="dnsType" class="w-full rounded-lg border-gray-300 focus:ring-blue-500 focus:border-blue-500">
              <option>A</option>
              <option>AAAA</option>
              <option>MX</option>
              <option>TXT</option>
              <option>NS</option>
            </select>
            <button id="btnDns" class="btn-primary text-white px-4 py-2 rounded-lg">Consultar</button>
            <pre id="outDns" class="bg-gray-900 text-gray-100 p-3 rounded-lg text-sm overflow-auto max-h-60"></pre>
          </div>
        </div>

        <!-- Ping -->
        <div class="p-5 border rounded-xl shadow-sm md:col-span-2">
          <h3 class="font-semibold mb-3">Ping</h3>
          <div class="grid md:grid-cols-3 gap-3">
            <input id="pingHost" type="text" placeholder="8.8.8.8"
                   class="rounded-lg border-gray-300 focus:ring-blue-500 focus:border-blue-500"/>
            <div class="flex items-center gap-2">
              <span class="text-sm text-gray-700">Cantidad</span>
              <input id="pingCount" type="number" value="4" min="1" max="10"
                     class="w-24 rounded-lg border-gray-300 focus:ring-blue-500 focus:border-blue-500"/>
            </div>
            <button id="btnPing" class="btn-primary text-white px-4 py-2 rounded-lg">Enviar</button>
          </div>
          <pre id="outPing" class="bg-gray-900 text-gray-100 p-3 rounded-lg text-sm overflow-auto max-h-60 mt-3"></pre>
        </div>
      </div>
    </div>
  </section>

  <!-- ===== CTA ===== -->
  <section class="py-16 bg-blue-700 text-white">
    <div class="container mx-auto text-center">
      <h2 class="text-3xl font-bold mb-6">¿Listo para asegurar tu red?</h2>
      <p class="text-xl mb-8">Agenda una consulta gratuita para hablar de tus necesidades NOC.</p>
      <div class="flex flex-col md:flex-row justify-center space-y-4 md:space-y-0 md:space-x-6">
        <a href="https://calendly.com/mauricioromeroca" class="bg-white text-blue-700 px-8 py-3 rounded-lg font-semibold hover:bg-gray-100">
          Agendar consulta
        </a>
        <a href="tel:4386309157" class="btn-primary text-white px-8 py-3 rounded-lg font-semibold">
          Llamar a Soporte de Emergencia
        </a>
      </div>
    </div>
  </section>

  <!-- Footer centralizado -->
  <div id="app-footer"></div>

  <!-- ===== JS de la caja de herramientas NOC ===== -->
  <script>
  (function(){
    const CP_API = 'https://romanoti-tools-api.onrender.com';
    const $   = (id) => document.getElementById(id);
    const val = (id) => (($(id)?.value) || '').trim();
    const keyHdr = () => ({ 'x-api-key': val('nocKey') });

    const KEY_STORAGE = 'noc_org_key';
    const saved = localStorage.getItem(KEY_STORAGE);
    if (saved && $('nocKey')) $('nocKey').value = saved;
    $('nocKey')?.addEventListener('input', () => {
      const k = val('nocKey');
      if (k) localStorage.setItem(KEY_STORAGE, k);
      else   localStorage.removeItem(KEY_STORAGE);
    });

    function showJSON(preId, payload){
      const el = $(preId);
      if (!el) return;
      try { el.textContent = (typeof payload === 'string') ? payload : JSON.stringify(payload, null, 2); }
      catch { el.textContent = String(payload); }
    }

    async function postJson(path, body, extraHeaders = {}){
      const headers = {
        'content-type': 'application/json',
        'accept'      : 'application/json',
        ...keyHdr(),
        ...extraHeaders
      };
      let res, text;
      try{
        res  = await fetch(`${CP_API}${path}`, { method: 'POST', headers, body: JSON.stringify(body) });
        text = await res.text();
      }catch(err){
        return { ok:false, status:0, error:String(err) };
      }
      try { return { ok: res.ok, status: res.status, data: JSON.parse(text) }; }
      catch{ return { ok: res.ok, status: res.status, data: text }; }
    }

    $('btnHttp')?.addEventListener('click', async () => {
      const url      = val('httpUrl');
      const timeoutS = Number(val('httpTimeout') || '8');
      const verify   = $('httpTls')?.checked ?? true;
      if (!url) { showJSON('outHttp', { error: 'Ingresa una URL' }); return; }
      showJSON('outHttp', 'Ejecutando…');
      const resp = await postJson('/noc/http-check', { url, timeout_s: timeoutS, verify_tls: verify });
      showJSON('outHttp', resp);
    });

    $('btnDns')?.addEventListener('click', async () => {
      const domain = val('dnsDomain');
      const type   = (val('dnsType') || 'A').toUpperCase();
      if (!domain) { showJSON('outDns', { error: 'Ingresa un dominio' }); return; }
      showJSON('outDns', 'Ejecutando…');
      const resp = await postJson('/noc/dns-lookup', { domain, type });
      showJSON('outDns', resp);
    });

    $('btnPing')?.addEventListener('click', async () => {
      const host  = val('pingHost');
      const count = Number(val('pingCount') || '4');
      if (!host) { showJSON('outPing', { error: 'Ingresa un host' }); return; }
      showJSON('outPing', 'Enviando…');
      const resp = await postJson('/network/ping', { host, count });
      showJSON('outPing', resp);
    });
  })();
  </script>

  <!-- Nav/Footer (con versión para evitar caché) -->
  <script defer src="/js/nav.js?v=6"></script>
  <script defer src="/js/footer.js?v=6"></script>
  <script defer src="/js/fix-nav.js?v=6"></script>
</body>
</html>
